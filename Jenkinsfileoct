node{

def maven = tool name: "maven-1"

echo "node running name: ${env.NODE_NAME} "

echo "job name:  ${env.JOB_NAME} "

properties([buildDiscarder(logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '5', numToKeepStr: '5'))])
properties([pipelineTriggers([pollSCM('* * * * *')])])

script {
    currentBuild.displayName = "Dev - ${env.BUILD_NUMBER}"
    currentBuild.description = "this is for testing pipeline for oct batch"
}
//checkout stage
stage('checkout'){

  git 'https://github.com/sanchitraj5/maven-java-oct.git'
}
//build stage
stage('building'){
sh "$maven/bin/mvn clean package"

//sonarqube report
stage ('sonartest'){
sh "$maven/bin/mvn sonar:sonar"
}

/*
//upload nexus
stage ('nexus upload'){
sh "$maven/bin/mvn deploy"
}
*/

}
}//Node closing
